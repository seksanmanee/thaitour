<!-- 
  - @author    Ionic Bucket <ionicbucket@gmail.com>
  - @copyright Copyright (c) 2017
  - @license   Fulcrumy
-->
<!-- Password Change Page -->

<ion-header no-border>

  <ion-navbar color="white">
    <ion-buttons start>
      <!-- Modal close button  -->
      <button ion-button color="default" clear (click)="dismiss()">
        <ion-icon name="close" style="zoom:2.0;"></ion-icon>
      </button>
    </ion-buttons>

    <!-- page title -->
    <ion-title>Change Password</ion-title>
  </ion-navbar>

</ion-header>

<ion-content padding>
  <form [formGroup]="passwordForm">
    <ion-list>
      <!-- User Current Password -->
      <ion-item>
        <ion-label>
          <ion-icon color="default" name="lock"></ion-icon>
        </ion-label>
        <ion-input type="password" placeholder="Current password" class="ion-ios-locked-outline" formControlName="currentPassword"
          [(ngModel)]="passwordForm.currentPassword">
        </ion-input>
      </ion-item>

      <!-- New Password Option -->
      <ion-item>
        <ion-label>
          <ion-icon color="default" name="lock"></ion-icon>
        </ion-label>
        <ion-input type="password" placeholder="New Password" class="ion-ios-locked-outline" formControlName="newPassword" [(ngModel)]="passwordForm.newPassword">
        </ion-input>
      </ion-item>

      <ion-item class="error-message" *ngIf="!passwordForm.controls.newPassword.valid  && passwordForm.controls.newPassword.dirty">
        <p>Your password needs more than 6 characters.</p>
      </ion-item>

      <!-- New password, again -->
      <ion-item>
        <ion-label>
          <ion-icon color="default" name="lock"></ion-icon>
        </ion-label>
        <ion-input type="password" placeholder="New Password, again" class="ion-ios-locked-outline" formControlName="repeatPassword"
          [(ngModel)]="passwordForm.repeatPassword">
        </ion-input>
      </ion-item>

      <ion-item class="error-message" *ngIf="!passwordForm.controls.repeatPassword.valid  && passwordForm.controls.repeatPassword.dirty">
        <p>Password mismatch.</p>
      </ion-item>

      <!-- Update button -->
      <button ion-button type="submit" color="default" block class="btn btn-primary" [disabled]="!passwordForm.valid" (click)="updatePassword()">
        Update
      </button>
    </ion-list>
  </form>
</ion-content>